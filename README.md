# r3e-adaptive-ai-primer

Allows tweaking of the adaptive AI file for [R3E](http://game.raceroom.com/), based on a database that provides the track times the AI does at different levels.

The file can be found in 
```My Documents\My Games\SimBin\RaceRoom Racing Experience\UserData\Player1\aiadaptation.xml```

How the system works was reverse engineered [here](https://forum.sector3studios.com/index.php?threads/the-new-adaptive-ai.5013/page-4#post-70837) by the user "Cheerfullyinsane" on the sector3studios forums. This work is based upong the findings in that thread.

## Work in progress
No user interface yet, you need to run the command-line tool.

## How to use

### Database Seed Setup
The project comes with a pre-seeded "database.lua" file thanks to the community at the sector3studios forum. It is not complete, contribute to make it better.

To enhance the database dump as many "aiadaptation.xml" files as you can find from many people in the "/seeds" directory (the tool will look for *.xml files). Run the tool it will update the database and generate a "results/database.html" file similar to [this](http://htmlpreview.github.io/?https://github.com/pixeljetstream/r3e-adaptive-ai-primer/blob/master/docs/sample.html).

The table gives you AI laptimes for different levels for each track/car combo found in the database. The lower number is the "variance" in seconds, when multiple times for the same AI level were found. The lower the variance the more reliable the number (unless zero then it means we only have one entry).

### Database AI level completion

When the tool is run, it also generates a "results/processed.html" file, which looks just like the database file, however this time all AI levels have timing values. These are generated by linear curve fitting to the original database. The fitting may not always work, especially as the database may have noisy data from different users, it can happen that low AI is faster than higher AI, the tool will therefore reject curves that were not plausible.

Check the "config.lua" file for some of the influence on the fitting/plausibility checks.

### Modifying your AI file

* Run the tool (it will print some commandline stuff)
* Look at the "results/processed.html", find the AI levels you want to race against.
* Modify the "edits.lua" file to your liking. It does contain comments what to od. You will need the classid in "()" behind car class, and the trackid numbers and provide them as "strings" to the functions.
* '''Warning:''' The exisitng ai levels for the track/class you are editing will be overwritten in your aiadaptation.xml file, make backups! Double check on classid and trackid!
* pass the "edits.lua" file to the exe (commandline or drag and drop), it will then perform all edits you defined within it.